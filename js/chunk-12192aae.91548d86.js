(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12192aae"],{"20b9":function(t,e,n){t.exports=n.p+"img/sports.0b2b5780.jpg"},"28aa":function(t,e,n){t.exports=n.p+"img/women.d118936a.jpg"},"31ec":function(t,e,n){t.exports=n.p+"img/baby.a2022912.jpg"},"4f7f":function(t,e,n){"use strict";var r=n("c26b"),i=n("b39a"),o="Set";t.exports=n("e0b8")(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,o),t=0===t?0:t,t)}},r)},"5df3":function(t,e,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},"67ab":function(t,e,n){var r=n("ca5a")("meta"),i=n("d3f4"),o=n("69a8"),s=n("86cc").f,a=0,c=Object.isExtensible||function(){return!0},u=!n("79e5")((function(){return c(Object.preventExtensions({}))})),l=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},d=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return u&&g.NEED&&c(t)&&!o(t,r)&&l(t),t},g=t.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},"6c49":function(t,e,n){var r={"./baby.jpg":"31ec","./kids.jpg":"7e5b","./men.jpg":"b7b2","./search.jpg":"71f3","./sports.jpg":"20b9","./women.jpg":"28aa"};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id="6c49"},"71f3":function(t,e,n){t.exports=n.p+"img/search.53e915dd.jpg"},"7e5b":function(t,e,n){t.exports=n.p+"img/kids.b27fec8c.jpg"},"7f7f":function(t,e,n){var r=n("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n("9e1e")&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},b39a:function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},b7b2:function(t,e,n){t.exports=n.p+"img/men.779bfab8.jpg"},b802:function(t,e,n){},c26b:function(t,e,n){"use strict";var r=n("86cc").f,i=n("2aeb"),o=n("dcbc"),s=n("9b43"),a=n("f605"),c=n("4a59"),u=n("01f9"),l=n("d53b"),d=n("7a56"),f=n("9e1e"),p=n("67ab").fastKey,g=n("b39a"),h=f?"_s":"size",v=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){a(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[h]=0,void 0!=r&&c(r,n,t[u],t)}));return o(l.prototype,{clear:function(){for(var t=g(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var n=g(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[h]--}return!!r},forEach:function(t){g(this,e);var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!v(g(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return g(this,e)[h]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[h]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=g(t,e),this._k=n,this._l=void 0}),(function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?l(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(e)}}},c908:function(t,e,n){"use strict";var r=n("b802"),i=n.n(r);i.a},d17f:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"row"},[r("div",{staticClass:"sidebar-sticky col-md-2 col-sm-12 col-xs-12 make-me-sticky accordion mousePointer",attrs:{id:"sidebar"}},[t._l(t.getTypeItem,(function(e){return r("div",{key:e.id,staticClass:"col-md-12 col-sm-4 col-xs-4 mb-2 hideobj"},[r("div",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#"+e.id,"aria-expanded":"true","aria-controls":e.id}},[r("i",{staticClass:"fas fa-tshirt light300 px-1"}),r("span",{staticClass:"text-muted"},[t._v(t._s(e.type))])]),r("ul",{staticClass:"nav flex-column collapse",attrs:{id:e.id,"aria-labelledby":"headingOne","data-parent":"#sidebar"}},t._l(t.getSeriesItem,(function(n){return r("li",{key:n.id,staticClass:"nav-item col-lg-12 seriesStyle"},[n.type==e.type?r("a",{staticClass:"ml-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getSeries(n.series)}}},[t._v("\n              "+t._s(n.series)+"\n            ")]):t._e()])})),0)])})),r("div",{staticClass:"container mb-3 hideobj-md showobj"},[r("select",{staticClass:"custom-select",attrs:{id:"inputGroupSelect01"}},t._l(t.getTypeItem,(function(e){return r("optgroup",{key:e.id+"-sm",attrs:{value:"${itemt.id}-sm"}},[r("option",{attrs:{disabled:""}},[t._v(t._s(e.type))]),t._l(t.getSeriesItem,(function(n){return r("option",{directives:[{name:"show",rawName:"v-show",value:n.type==e.type,expression:"items.type == itemt.type"}],key:n.id+"-sm",attrs:{value:"items"}},[r("a",{attrs:{href:"#"}},[t._v(t._s(n.series))])])}))],2)})),0)])],2),r("div",{staticClass:"col-md-10 col-sm-12 px-3 ml-auto"},[r("div",{staticClass:"card mr-auto",staticStyle:{"margin-bottom":"30px"}},["Search"!=t.currentPath.name?r("img",{staticClass:"card-img-top",attrs:{src:n("6c49")("./"+t.currentPath.params.productCategory+".jpg"),alt:"..."}}):t._e(),"Search"==t.currentPath.name?r("img",{staticClass:"card-img-top",attrs:{src:n("71f3"),alt:"..."}}):t._e()]),"Search"==t.currentPath.name?r("div",{staticClass:"h4",staticStyle:{"margin-bottom":"30px"}},[t._v("\n        搜尋結果：\n        "),0==t.products.length?r("span",[t._v("無此商品")]):t._e()]):t._e(),r("div",{staticClass:"row"},[t._l(t.productsInfiniteScroll,(function(e){return r("div",{key:e.id,staticClass:"col-lg-3 col-md-6 col-sm-6",staticStyle:{"margin-bottom":"30px"}},[r("div",{staticClass:"card shadow-sm border-2"},[r("div",{staticClass:"image-rwd mousePointer",style:{backgroundImage:"url("+e.imageUrl+")"},on:{click:function(n){return t.goProductDetail(e)}}}),r("div",{staticClass:"card-body"},[r("div",{staticClass:"text-dark text-center mousePointer",staticStyle:{height:"42px"},on:{click:function(n){return t.goProductDetail(e)}}},[e.stock<5?r("span",{staticClass:"badge badge-pill ml-2 text-white bg-danger"},[t._v("熱銷")]):t._e(),t._v("\n                "+t._s(e.title)+"\n              ")]),r("div",{staticClass:"text-center mb-2"},[e.price?t._e():r("div",{staticClass:"d-inline"},[t._v(t._s(t._f("currency")(e.origin_price)))]),e.price?r("del",{staticClass:"d-inline"},[t._v(t._s(t._f("currency")(e.origin_price)))]):t._e(),e.price?r("div",{staticClass:"d-inline ml-2",class:{"text-danger":e.origin_price}},[t._v("NT"+t._s(t._f("currency")(e.price)))]):t._e()]),r("div",{staticClass:"text-center"},[0!=e.stock?r("button",{staticClass:"btn btn-outline-danger btn-sm col-6",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),t.addCartToLS(e)}}},[t.status.cartId==e.id?r("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e(),t.status.cartId!=e.id?r("i",{staticClass:"fas fa-cart-plus"}):t._e()]):t._e(),0==e.stock?r("button",{staticClass:"btn btn-outline-danger btn-sm col-6",attrs:{type:"button"}},[t._v("\n                  已售完\n                ")]):t._e()])])])])})),t.products.length>t.productsInfiniteScrollCount?r("div",{staticClass:"col-md-12 text-center text-lativbg"},[r("i",{staticClass:"fas fa-chevron-down fa-2x arrow-animate"})]):t._e()],2)])])],1)},i=[],o=(n("96cf"),n("3b8d")),s=(n("ac6a"),n("5df3"),n("4f7f"),n("7f7f"),n("1157")),a=n.n(s),c={components:{},data:function(){return{products:[],productsInfiniteScrollCount:4,productsOriginal:[],productsGetCategory:[],currentPath:{},isLoading:!1,status:{loading:!1,cartId:""},cartArrayToLS:[]}},methods:{getCategory:function(){var t=this,e=[],n="";"Search"!==t.currentPath.name?(n=t.currentPath.params.productCategory,e=t.productsOriginal.filter((function(t){return t.category===n&&1===t.is_enabled}))):(n=t.currentPath.params.searchStr,e=t.productsOriginal.filter((function(t){return(-1!==t.title.indexOf(n)||t.category===n||-1!==t.type.indexOf(n)||-1!==t.series.indexOf(n))&&1===t.is_enabled}))),t.productsGetCategory=Object.assign([],e),t.products=t.productsGetCategory},getSeries:function(t){var e=this;e.productsInfiniteScrollCount=4,document.body.scrollTop=0,document.documentElement.scrollTop=0;var n=e.productsGetCategory.filter((function(e){if(e.series===t)return!0}));e.products=n,console.log(e.products,n,e.productsGetCategory)},filterSideBtn:function(t){var e=this;if("Search"!==e.currentPath.name){var n=new Set,r=e.productsGetCategory.filter((function(e){if(e[t])return!n.has(e[t])&&n.add(e[t])}));return r}},addCartToLS:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;localStorage.getItem("Cart")&&(n.cartArrayToLS=JSON.parse(localStorage.getItem("Cart")));var r=!0,i=Math.floor(Date.now()),o={product:t,qty:e,timestamp:i};n.cartArrayToLS.filter((function(e){if(console.log("element",e,"element.id",e.product.id,"item",t.id),e.product.id===t.id)return r=!1,r})),console.log("hadProduct",r),r?(n.cartArrayToLS.push(o),localStorage.setItem("Cart",JSON.stringify(n.cartArrayToLS)),n.$bus.$emit("getCartLS:push"),n.$bus.$emit("cartStatus:push",1),n.$bus.$emit("message:push","已加入購物車","success"),r=!1,n.status.cartId=""):(n.$bus.$emit("message:push","購物車內已有此商品","warning"),n.status.cartId="")},goProductDetail:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=this,this.loading=!0,n.$router.push("/product-detail/".concat(e.id)),this.loading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),scrollToLoading:function(){var t=this,e=a()(window).scrollTop(),n=a()("body").height()-a()(window).height();e+100>n&&(t.productsInfiniteScrollCount=t.productsInfiniteScrollCount+4)},debounce:function(t,e){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){t.apply(r,i)}),e)}}},watch:{$route:function(t,e){var n=this;n.isLoading=!0,n.currentPath=n.$route,n.productsInfiniteScrollCount=4,n.getCategory(),n.isLoading=!1}},computed:{getTypeItem:function(){return this.filterSideBtn("type")},getSeriesItem:function(){return this.filterSideBtn("series")},productsInfiniteScroll:function(){var t=this,e=Object.assign([],t.products);return e.splice(0,t.productsInfiniteScrollCount)}},created:function(){var t=this;t.currentPath=t.$route;var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("joseph_work01","/products/all");t.isLoading=!0,this.$http.get(e).then((function(e){console.log("getProducts",e.data),t.productsOriginal=e.data.products,t.isLoading=!1})).then((function(){t.getCategory()})).then((function(){t.products.length>t.productsInfiniteScrollCount?window.addEventListener("scroll",t.debounce(t.scrollToLoading,300)):console.log("stop scroll",t.products.length,t.productsInfiniteScrollCount)}))},mounted:function(){var t=this;a()("#inputGroupSelect01").change((function(){var e=a()("select option:selected").children("a").contents()[0].nodeValue;t.getSeries(e)}))},beforeDestroy:function(){}},u=c,l=(n("c908"),n("2877")),d=Object(l["a"])(u,r,i,!1,null,"f4915820",null);e["default"]=d.exports},e0b8:function(t,e,n){"use strict";var r=n("7726"),i=n("5ca1"),o=n("2aba"),s=n("dcbc"),a=n("67ab"),c=n("4a59"),u=n("f605"),l=n("d3f4"),d=n("79e5"),f=n("5cc5"),p=n("7f20"),g=n("5dbc");t.exports=function(t,e,n,h,v,m){var b=r[t],_=b,y=v?"set":"add",C=_&&_.prototype,S={},w=function(t){var e=C[t];o(C,t,"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(m||C.forEach&&!d((function(){(new _).entries().next()})))){var x=new _,k=x[y](m?{}:-0,1)!=x,I=d((function(){x.has(1)})),j=f((function(t){new _(t)})),O=!m&&d((function(){var t=new _,e=5;while(e--)t[y](e,e);return!t.has(-0)}));j||(_=e((function(e,n){u(e,_,t);var r=g(new b,e,_);return void 0!=n&&c(n,v,r[y],r),r})),_.prototype=C,C.constructor=_),(I||O)&&(w("delete"),w("has"),v&&w("get")),(O||k)&&w(y),m&&C.clear&&delete C.clear}else _=h.getConstructor(e,t,v,y),s(_.prototype,n),a.NEED=!0;return p(_,t),S[t]=_,i(i.G+i.W+i.F*(_!=b),S),m||h.setStrong(_,t,v),_}}}]);
//# sourceMappingURL=chunk-12192aae.91548d86.js.map
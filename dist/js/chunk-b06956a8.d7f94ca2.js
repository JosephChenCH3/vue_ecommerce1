(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b06956a8"],{"94c9":function(t,a,s){},dc62:function(t,a,s){"use strict";var c=s("94c9"),o=s.n(c);o.a},fe2f:function(t,a,s){"use strict";s.r(a);var c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8 col-sm-12",staticStyle:{height:"910px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+t.product.imageUrl+")"}}),s("div",{staticClass:"col-md-4 col-sm-12 ml-auto"},[s("div",{staticClass:"h4"},[t._v(t._s(t.product.title))]),s("span",{staticClass:"badge badge-pill ml-2",staticStyle:{"background-color":"#C1EFFF"}},[t._v(t._s(t.product.category))]),s("span",{staticClass:"badge badge-pill ml-2",staticStyle:{"background-color":"#C1FFE9"}},[t._v(t._s(t.product.type))]),s("span",{staticClass:"badge badge-pill ml-2",staticStyle:{"background-color":"#FFF8C1"}},[t._v(t._s(t.product.series))]),t.product.origin_price?s("div",{staticClass:"h5 text-right"},[s("del",[t._v(t._s(t.product.origin_price*t.quantity)+" 元")])]):t._e(),s("div",{staticClass:"h2 text-danger text-right"},[t._v(t._s(t._f("currency")(t.product.price*t.quantity))+" 元")]),s("hr"),s("div",{staticClass:"text-left text-l"},[t._v("購買數量")]),t.product.stock>5?s("div",{staticClass:"h6 text-right"},[t._v("庫存："+t._s(t.product.stock)+" 件")]):t._e(),t.product.stock<5?s("div",{staticClass:"h6 text-right text-danger"},[t._v("只剩最後 "+t._s(t.product.stock)+" 件")]):t._e(),0==t.product.stock?s("div",{staticClass:"h6 text-right text-danger"},[t._v("補貨中")]):t._e(),0!=t.product.stock?s("select",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.quantity=a.target.multiple?s:s[0]}}},t._l(Number(t.product.stock),(function(a){return s("option",{domProps:{value:a}},[t._v("\n                    "+t._s(a)+"\n                ")])})),0):t._e(),s("hr"),0!=t.product.stock?s("button",{staticClass:"btn btn-danger btn-sm col-12",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),t.addCartToLS(t.product,t.quantity)}}},[t.status.cartId==t.product.id?s("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e(),t.status.cartId!=t.product.id?s("i",{staticClass:"fas fa-cart-plus"}):t._e()]):t._e(),0!=t.product.stock?s("div",{staticClass:"mt-2 text-right mousePointer",on:{click:function(a){return t.goBack(t.product)}}},[t._v("返回前頁")]):t._e(),0==t.product.stock?s("button",{staticClass:"btn btn-danger btn-sm col-12",attrs:{type:"button"},on:{click:function(a){return t.goBack(t.product)}}},[t.status.cartId==t.product.id?s("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e(),t.status.cartId!=t.product.id?s("i",{staticClass:"fas fa-backspace"}):t._e(),t._v("\n                返回前頁\n            ")]):t._e()])])],1)},o=[],r={data:function(){return{productId:"",product:{stock:""},quantity:1,isLoading:!1,status:{loading:!1,cartId:""},cartArrayToLS:[]}},methods:{getProduct:function(){var t=this.productId,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("joseph_work01","/product/").concat(t),s=this;s.isLoading=!0,this.$http.get(a).then((function(t){console.log("getProduct",t.data),s.isLoading=!1,s.product=t.data.product}))},addCartToLS:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this;s.status.cartId=t.id,localStorage.getItem("Cart")&&(s.cartArrayToLS=JSON.parse(localStorage.getItem("Cart")));var c=!0,o=Math.floor(Date.now()),r={product:t,qty:a,timestamp:o};s.cartArrayToLS.filter((function(a){if(console.log("element",a,"element.id",a.product.id,"item",t.id),a.product.id==t.id)return c=!1})),console.log("hadProduct",c),c?(s.cartArrayToLS.push(r),localStorage.setItem("Cart",JSON.stringify(s.cartArrayToLS)),s.$bus.$emit("getCartLS:push"),s.$bus.$emit("cartStatus:push",s.cartArrayToLS),s.$bus.$emit("message:push","已加入購物車","success"),c=!1,s.status.cartId=""):(s.$bus.$emit("message:push","購物車內已有此商品","warning"),s.status.cartId="")},goBack:function(t){this.status.cartId=t.id,this.$router.go(-1),this.status.cartId=""}},created:function(){this.productId=this.$route.params.productId,this.getProduct()},beforeCreate:function(){console.log("beforeCreate",this.$route.params.productCategory)}},e=r,i=(s("dc62"),s("2877")),n=Object(i["a"])(e,c,o,!1,null,"6ecaea6c",null);a["default"]=n.exports}}]);
//# sourceMappingURL=chunk-b06956a8.d7f94ca2.js.map